/* ------------------------------------------------------------------------
	Class: prettyPhoto
	Use: Lightbox clone for jQuery
	Author: Stephane Caron (http://www.no-margin-for-errors.com)
	Version: 3.1.6
	
	Modifications: Minor additions by Sayontan Sinha to support title attribute using "data" for the tooltip plugin.
 ------------------------------------------------------------------------- */
!function(t){function e(){var t=location.href,e=-1!==t.indexOf("#prettyPhoto")&&decodeURI(t.substring(t.indexOf("#prettyPhoto")+1,t.length));return e&&(e=e.replace(/<|>/g,"")),e}function a(){"undefined"!=typeof theRel&&(location.hash=theRel+"/"+rel_index+"/")}function i(t,e){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var a=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null==a?"":a[1]}t.prettyPhoto={version:"3.1.6"},t.fn.prettyPhoto=function(o){o=jQuery.extend({hook:"rel",animation_speed:"fast",ajaxcallback:function(){},slideshow:5e3,autoplay_slideshow:!1,opacity:.8,show_title:!0,allow_resize:!0,allow_expand:!0,default_width:500,default_height:344,counter_separator_label:"/",theme:"pp_default",horizontal_padding:20,hideflash:!1,wmode:"opaque",autoplay:!0,modal:!1,deeplinking:!0,overlay_gallery:!0,overlay_gallery_max:30,keyboard_shortcuts:!0,changepicturecallback:function(){},callback:function(){},ie6_fallback:!0,markup:'<div class="pp_pic_holder"> \t\t\t\t\t\t<div class="ppt">&nbsp;</div> \t\t\t\t\t\t<div class="pp_top"> \t\t\t\t\t\t\t<div class="pp_left"></div> \t\t\t\t\t\t\t<div class="pp_middle"></div> \t\t\t\t\t\t\t<div class="pp_right"></div> \t\t\t\t\t\t</div> \t\t\t\t\t\t<div class="pp_content_container"> \t\t\t\t\t\t\t<div class="pp_left"> \t\t\t\t\t\t\t<div class="pp_right"> \t\t\t\t\t\t\t\t<div class="pp_content"> \t\t\t\t\t\t\t\t\t<div class="pp_loaderIcon"></div> \t\t\t\t\t\t\t\t\t<div class="pp_fade"> \t\t\t\t\t\t\t\t\t\t<a href="#" class="pp_expand" title="Expand the image">Expand</a> \t\t\t\t\t\t\t\t\t\t<div class="pp_hoverContainer"> \t\t\t\t\t\t\t\t\t\t\t<a class="pp_next" href="#">next</a> \t\t\t\t\t\t\t\t\t\t\t<a class="pp_previous" href="#">previous</a> \t\t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t\t\t<div id="pp_full_res"></div> \t\t\t\t\t\t\t\t\t\t<div class="pp_details"> \t\t\t\t\t\t\t\t\t\t\t<div class="pp_nav"> \t\t\t\t\t\t\t\t\t\t\t\t<a href="#" class="pp_arrow_previous">Previous</a> \t\t\t\t\t\t\t\t\t\t\t\t<p class="currentTextHolder">0/0</p> \t\t\t\t\t\t\t\t\t\t\t\t<a href="#" class="pp_arrow_next">Next</a> \t\t\t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t\t\t\t<p class="pp_description"></p> \t\t\t\t\t\t\t\t\t\t\t<div class="pp_social">{pp_social}</div> \t\t\t\t\t\t\t\t\t\t\t<a class="pp_close" href="#">Close</a> \t\t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t</div> \t\t\t\t\t\t</div> \t\t\t\t\t\t<div class="pp_bottom"> \t\t\t\t\t\t\t<div class="pp_left"></div> \t\t\t\t\t\t\t<div class="pp_middle"></div> \t\t\t\t\t\t\t<div class="pp_right"></div> \t\t\t\t\t\t</div> \t\t\t\t\t</div> \t\t\t\t\t<div class="pp_overlay"></div>',gallery_markup:'<div class="pp_gallery"> \t\t\t\t\t\t\t\t<a href="#" class="pp_arrow_previous">Previous</a> \t\t\t\t\t\t\t\t<div> \t\t\t\t\t\t\t\t\t<ul> \t\t\t\t\t\t\t\t\t\t{gallery} \t\t\t\t\t\t\t\t\t</ul> \t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t<a href="#" class="pp_arrow_next">Next</a> \t\t\t\t\t\t\t</div>',image_markup:'<img id="fullResImage" src="{path}" />',flash_markup:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="{width}" height="{height}"><param name="wmode" value="{wmode}" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{path}" /><embed src="{path}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="{width}" height="{height}" wmode="{wmode}"></embed></object>',quicktime_markup:'<object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab" height="{height}" width="{width}"><param name="src" value="{path}"><param name="autoplay" value="{autoplay}"><param name="type" value="video/quicktime"><embed src="{path}" height="{height}" width="{width}" autoplay="{autoplay}" type="video/quicktime" pluginspage="http://www.apple.com/quicktime/download/"></embed></object>',iframe_markup:'<iframe src ="{path}" width="{width}" height="{height}" frameborder="no"></iframe>',inline_markup:'<div class="pp_inline">{content}</div>',custom_markup:"",social_tools:'<div class="twitter"><a href="http://twitter.com/share" class="twitter-share-button" data-count="none">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"><\/script></div><div class="facebook"><iframe src="//www.facebook.com/plugins/like.php?locale=en_US&href={location_href}&amp;layout=button_count&amp;show_faces=true&amp;width=500&amp;action=like&amp;font&amp;colorscheme=light&amp;height=23" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:500px; height:23px;" allowTransparency="true"></iframe></div>'},o);var r,p,n,l,s,d,h,c,u,f,m,_,g,v,w,y,b,k,x,P,I,C,O,j,T,S=this,z=!1,M=t(window).height(),F=t(window).width(),R=!0,q=W();function A(){t(".pp_loaderIcon").hide();var e=q.scrollTop+(M/2-r.containerHeight/2);e<0&&(e=0),w.fadeTo(c.animation_speed,1),v.find(".pp_content").animate({height:r.contentHeight,width:r.contentWidth},c.animation_speed),v.animate({top:e,left:F/2-r.containerWidth/2<0?0:F/2-r.containerWidth/2,width:r.containerWidth},c.animation_speed,function(){v.find(".pp_hoverContainer,#fullResImage").height(r.height).width(r.width),v.find(".pp_fade").fadeIn(c.animation_speed),b&&"image"==E(f[g])?v.find(".pp_hoverContainer").show():v.find(".pp_hoverContainer").hide(),c.allow_expand&&(r.resized?t("a.pp_expand,a.pp_contract").show():t("a.pp_expand").hide()),!c.autoplay_slideshow||h||p||t.prettyPhoto.startSlideshow(),c.changepicturecallback(),p=!0}),function(){if(b&&c.overlay_gallery&&"image"==E(f[g])){C=57;var e="facebook"==c.theme||"pp_default"==c.theme?50:30;O=(O=Math.floor((r.containerWidth-100-e)/C))<f.length?O:f.length,0==(T=Math.ceil(f.length/O)-1)?(e=0,P.find(".pp_arrow_next,.pp_arrow_previous").hide()):P.find(".pp_arrow_next,.pp_arrow_previous").show();var a=O*C,i=f.length*C;P.css("margin-left",-(a/2+e/2)).find("div:first").width(a+5).find("ul").width(i).find("li.selected").removeClass("selected");var o=Math.floor(g/O)<T?Math.floor(g/O):T;t.prettyPhoto.changeGalleryPage(o),I.filter(":eq("+g+")").addClass("selected")}else v.find(".pp_content").unbind("mouseenter mouseleave")}(),o.ajaxcallback()}function H(e){v.find("#pp_full_res object,#pp_full_res embed").css("visibility","hidden"),v.find(".pp_fade").fadeOut(c.animation_speed,function(){t(".pp_loaderIcon").show(),e()})}function D(t,e){var a,i=!1;B(t,e);var o=t,r=e;if((d>F||s>M)&&R&&c.allow_resize&&!z){for(i=!0,a=!1;!a;)d>F?r=e/t*(o=F-200):s>M?o=t/e*(r=M-200):a=!0,s=r,d=o;(d>F||s>M)&&D(d,s),B(o,r)}return{width:Math.floor(o),height:Math.floor(r),containerHeight:Math.floor(s),containerWidth:Math.floor(d)+2*c.horizontal_padding,contentHeight:Math.floor(n),contentWidth:Math.floor(l),resized:i}}function B(e,a){e=parseFloat(e),a=parseFloat(a);var i=v.find(".pp_details");i.width(e);var o=parseFloat(i.css("marginTop"))+parseFloat(i.css("marginBottom"));o=(o+=(i=i.clone().addClass(c.theme).width(e).appendTo(t("body")).css({position:"absolute",top:-1e4})).height())<=34?36:o,i.remove();var r=v.find(".ppt");r.width(e);var p=parseFloat(r.css("marginTop"))+parseFloat(r.css("marginBottom"));p+=(r=r.clone().appendTo(t("body")).css({position:"absolute",top:-1e4})).height(),r.remove(),l=e,s=(n=a+o)+p+v.find(".pp_top").height()+v.find(".pp_bottom").height(),d=e}function E(t){return t.match(/youtube\.com\/watch/i)||t.match(/youtu\.be/i)?"youtube":t.match(/vimeo\.com/i)?"vimeo":t.match(/\b.mov\b/i)?"quicktime":t.match(/\b.swf\b/i)?"flash":t.match(/\biframe=true\b/i)?"iframe":t.match(/\bajax=true\b/i)?"ajax":t.match(/\bcustom=true\b/i)?"custom":"#"==t.substr(0,1)?"inline":"image"}function L(){if(R&&void 0!==v){q=W();var t=v.height(),e=v.width(),a=M/2+q.scrollTop-t/2;if(a<0&&(a=0),t>M)return;v.css({top:a,left:F/2+q.scrollLeft-e/2})}}function W(){return self.pageYOffset?{scrollTop:self.pageYOffset,scrollLeft:self.pageXOffset}:document.documentElement&&document.documentElement.scrollTop?{scrollTop:document.documentElement.scrollTop,scrollLeft:document.documentElement.scrollLeft}:document.body?{scrollTop:document.body.scrollTop,scrollLeft:document.body.scrollLeft}:void 0}function Q(e){if(c.social_tools&&(j=c.social_tools.replace("{location_href}",encodeURIComponent(location.href))),c.markup=c.markup.replace("{pp_social}",""),t("body").append(c.markup),v=t(".pp_pic_holder"),w=t(".ppt"),y=t("div.pp_overlay"),b&&c.overlay_gallery){var a,i;k=0,x="";for(var o=0;o<f.length;o++)f[o].match(/\b(jpg|jpeg|png|gif)\b/gi)?(a="",i=f[o]):(a="default",i=""),x+="<li class='"+a+"'><a href='#'><img src='"+i+"' width='50' alt='' /></a></li>";x=c.gallery_markup.replace(/{gallery}/g,x),v.find("#pp_full_res").after(x),P=t(".pp_pic_holder .pp_gallery"),I=P.find("li"),P.find(".pp_arrow_next").click(function(){return t.prettyPhoto.changeGalleryPage("next"),t.prettyPhoto.stopSlideshow(),!1}),P.find(".pp_arrow_previous").click(function(){return t.prettyPhoto.changeGalleryPage("previous"),t.prettyPhoto.stopSlideshow(),!1}),v.find(".pp_content").hover(function(){v.find(".pp_gallery:not(.disabled)").fadeIn()},function(){v.find(".pp_gallery:not(.disabled)").fadeOut()}),C=57,I.each(function(e){t(this).find("a").click(function(){return t.prettyPhoto.changePage(e),t.prettyPhoto.stopSlideshow(),!1})})}c.slideshow&&(v.find(".pp_nav").prepend('<a href="#" class="pp_play">Play</a>'),v.find(".pp_nav .pp_play").click(function(){return t.prettyPhoto.startSlideshow(),!1})),v.attr("class","pp_pic_holder "+c.theme),y.css({opacity:0,height:t(document).height(),width:t(window).width()}).bind("click",function(){c.modal||t.prettyPhoto.close()}),t("a.pp_close").bind("click",function(){return t.prettyPhoto.close(),!1}),c.allow_expand&&t("a.pp_expand").bind("click",function(e){return t(this).hasClass("pp_expand")?(t(this).removeClass("pp_expand").addClass("pp_contract"),R=!1):(t(this).removeClass("pp_contract").addClass("pp_expand"),R=!0),H(function(){t.prettyPhoto.open()}),!1}),v.find(".pp_previous, .pp_nav .pp_arrow_previous").bind("click",function(){return t.prettyPhoto.changePage("previous"),t.prettyPhoto.stopSlideshow(),!1}),v.find(".pp_next, .pp_nav .pp_arrow_next").bind("click",function(){return t.prettyPhoto.changePage("next"),t.prettyPhoto.stopSlideshow(),!1}),L()}return t(window).unbind("resize.prettyphoto").bind("resize.prettyphoto",function(){L(),M=t(window).height(),F=t(window).width(),void 0!==y&&y.height(t(document).height()).width(F)}),o.keyboard_shortcuts&&t(document).unbind("keydown.prettyphoto").bind("keydown.prettyphoto",function(e){if(void 0!==v&&v.is(":visible"))switch(e.keyCode){case 37:t.prettyPhoto.changePage("previous"),e.preventDefault();break;case 39:t.prettyPhoto.changePage("next"),e.preventDefault();break;case 27:c.modal||t.prettyPhoto.close(),e.preventDefault()}}),t.prettyPhoto.initialize=function(){"pp_default"==(c=o).theme&&(c.horizontal_padding=16),u=t(this).attr(c.hook);return b=!!/\[(?:.*)\]/.exec(u),f=b?jQuery.map(S,function(e,a){if(-1!=t(e).attr(c.hook).indexOf(u))return t(e).attr("href")}):t.makeArray(t(this).attr("href")),m=b?jQuery.map(S,function(e,a){if(-1!=t(e).attr(c.hook).indexOf(u))return t(e).find("img").attr("alt")?t(e).find("img").attr("alt"):""}):t.makeArray(t(this).find("img").attr("alt")),_=b?jQuery.map(S,function(e,a){if(-1!=t(e).attr(c.hook).indexOf(u))return t(e).data("title")?t(e).data("title"):t(e).attr("title")?t(e).attr("title"):""}):t.makeArray(t(this).attr("title")?t(this).attr("title"):t(this).data("title")?t(this).data("title"):""),f.length>c.overlay_gallery_max&&(c.overlay_gallery=!1),g=jQuery.inArray(t(this).attr("href"),f),b?g:t("a["+c.hook+"^='"+u+"']").index(t(this)),Q(this),c.allow_resize&&t(window).bind("scroll.prettyphoto",function(){L()}),t.prettyPhoto.open(),!1},t.prettyPhoto.open=function(e){var p;void 0===c&&(c=o,f=t.makeArray(arguments[0]),m=arguments[1]?t.makeArray(arguments[1]):t.makeArray(""),_=arguments[2]?t.makeArray(arguments[2]):t.makeArray(""),p=f.length>1,g=arguments[3]?arguments[3]:0,Q(e.target)),c.hideflash&&t("object,embed,iframe[src*=youtube],iframe[src*=vimeo]").css("visibility","hidden"),t(f).length>1?t(".pp_nav").show():t(".pp_nav").hide(),t(".pp_loaderIcon").show(),c.deeplinking&&a(),c.social_tools&&(j=c.social_tools.replace("{location_href}",encodeURIComponent(location.href)),v.find(".pp_social").html(j)),w.is(":hidden")&&w.css("opacity",0).show(),y.show().fadeTo(c.animation_speed,c.opacity),v.find(".currentTextHolder").text(g+1+c.counter_separator_label+t(f).length),void 0!==_[g]&&""!=_[g]?v.find(".pp_description").show().html(unescape(_[g])):v.find(".pp_description").hide();var n=parseFloat(i("width",f[g]))?i("width",f[g]):c.default_width.toString(),l=parseFloat(i("height",f[g]))?i("height",f[g]):c.default_height.toString();return z=!1,-1!=l.indexOf("%")&&(l=parseFloat(t(window).height()*parseFloat(l)/100-150),z=!0),-1!=n.indexOf("%")&&(n=parseFloat(t(window).width()*parseFloat(n)/100-150),z=!0),v.fadeIn(function(){c.show_title&&""!=m[g]&&void 0!==m[g]?w.html(unescape(m[g])):w.html("&nbsp;");var e,a,o,s,d="",h=!1;switch(E(f[g])){case"image":d=new Image,e=new Image,p&&g<t(f).length-1&&(e.src=f[g+1]),a=new Image,p&&f[g-1]&&(a.src=f[g-1]),v.find("#pp_full_res")[0].innerHTML=c.image_markup.replace(/{path}/g,f[g]),d.onload=function(){r=D(d.width,d.height),A()},d.onerror=function(){alert("Image cannot be loaded. Make sure the path is correct and image exist."),t.prettyPhoto.close()},d.src=f[g];break;case"youtube":r=D(n,l),""==(o=i("v",f[g]))&&((o=(o=f[g].split("youtu.be/"))[1]).indexOf("?")>0&&(o=o.substr(0,o.indexOf("?"))),o.indexOf("&")>0&&(o=o.substr(0,o.indexOf("&")))),s="http://www.youtube.com/embed/"+o,i("rel",f[g])?s+="?rel="+i("rel",f[g]):s+="?rel=1",c.autoplay&&(s+="&autoplay=1"),x=c.iframe_markup.replace(/{width}/g,r.width).replace(/{height}/g,r.height).replace(/{wmode}/g,c.wmode).replace(/{path}/g,s);break;case"vimeo":r=D(n,l);s="http://player.vimeo.com/video/"+(o=f[g]).match(/http(s?):\/\/(www\.)?vimeo.com\/(\d+)/)[3]+"?title=0&amp;byline=0&amp;portrait=0",c.autoplay&&(s+="&autoplay=1;");var u=r.width+"/embed/?moog_width="+r.width;x=c.iframe_markup.replace(/{width}/g,u).replace(/{height}/g,r.height).replace(/{path}/g,s);break;case"quicktime":(r=D(n,l)).height+=15,r.contentHeight+=15,r.containerHeight+=15,x=c.quicktime_markup.replace(/{width}/g,r.width).replace(/{height}/g,r.height).replace(/{wmode}/g,c.wmode).replace(/{path}/g,f[g]).replace(/{autoplay}/g,c.autoplay);break;case"flash":r=D(n,l);var _=f[g];_=_.substring(f[g].indexOf("flashvars")+10,f[g].length);var y=f[g];y=y.substring(0,y.indexOf("?")),x=c.flash_markup.replace(/{width}/g,r.width).replace(/{height}/g,r.height).replace(/{wmode}/g,c.wmode).replace(/{path}/g,y+"?"+_);break;case"iframe":r=D(n,l);var b=f[g];b=b.substr(0,b.indexOf("iframe")-1),x=c.iframe_markup.replace(/{width}/g,r.width).replace(/{height}/g,r.height).replace(/{path}/g,b);break;case"ajax":R=!1,r=D(n,l),R=!0,h=!0,t.get(f[g],function(t){x=c.inline_markup.replace(/{content}/g,t),v.find("#pp_full_res")[0].innerHTML=x,A()});break;case"custom":r=D(n,l),x=c.custom_markup;break;case"inline":var k=t(f[g]).clone().append('<br clear="all" />').css({width:c.default_width}).wrapInner('<div id="pp_full_res"><div class="pp_inline"></div></div>').appendTo(t("body")).show();R=!1,r=D(t(k).width(),t(k).height()),R=!0,t(k).remove(),x=c.inline_markup.replace(/{content}/g,t(f[g]).html())}d||h||(v.find("#pp_full_res")[0].innerHTML=x,A())}),!1},t.prettyPhoto.changePage=function(e){k=0,"previous"==e?--g<0&&(g=t(f).length-1):"next"==e?++g>t(f).length-1&&(g=0):g=e,g,R||(R=!0),c.allow_expand&&t(".pp_contract").removeClass("pp_contract").addClass("pp_expand"),H(function(){t.prettyPhoto.open()})},t.prettyPhoto.changeGalleryPage=function(t){"next"==t?++k>T&&(k=0):"previous"==t?--k<0&&(k=T):k=t;var e="next"==t||"previous"==t?c.animation_speed:0,a=k*(O*C);P.find("ul").animate({left:-a},e)},t.prettyPhoto.startSlideshow=function(){void 0===h?(v.find(".pp_play").unbind("click").removeClass("pp_play").addClass("pp_pause").click(function(){return t.prettyPhoto.stopSlideshow(),!1}),h=setInterval(t.prettyPhoto.startSlideshow,c.slideshow)):t.prettyPhoto.changePage("next")},t.prettyPhoto.stopSlideshow=function(){v.find(".pp_pause").unbind("click").removeClass("pp_pause").addClass("pp_play").click(function(){return t.prettyPhoto.startSlideshow(),!1}),clearInterval(h),h=void 0},t.prettyPhoto.close=function(){y.is(":animated")||(t.prettyPhoto.stopSlideshow(),v.stop().find("object,embed").css("visibility","hidden"),t("div.pp_pic_holder,div.ppt,.pp_fade").fadeOut(c.animation_speed,function(){t(this).remove()}),y.fadeOut(c.animation_speed,function(){c.hideflash&&t("object,embed,iframe[src*=youtube],iframe[src*=vimeo]").css("visibility","visible"),t(this).remove(),t(window).unbind("scroll.prettyphoto"),-1!==location.href.indexOf("#prettyPhoto")&&(location.hash="prettyPhoto"),c.callback(),R=!0,p=!1,c=null}))},!pp_alreadyInitialized&&e()&&(pp_alreadyInitialized=!0,hashIndex=e(),hashRel=hashIndex,hashIndex=hashIndex.substring(hashIndex.indexOf("/")+1,hashIndex.length-1),hashRel=hashRel.substring(0,hashRel.indexOf("/")),setTimeout(function(){t("a["+o.hook+"^='"+hashRel+"']:eq("+hashIndex+")").trigger("click")},50)),this.unbind("click.prettyphoto").bind("click.prettyphoto",t.prettyPhoto.initialize)}}(jQuery);var pp_alreadyInitialized=!1;
